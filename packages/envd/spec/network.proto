syntax = "proto3";

package network;

import "permissions.proto";
import "google/protobuf/empty.proto";

service Network {
    rpc ConfigurePort(ConfigurePortRequest) returns (google.protobuf.Empty);
    rpc ListPorts(ListPortsRequest) returns (ListPortsResponse);
    rpc WatchPorts(WatchPortsRequest) returns (stream Port);
}

message ConfigurePortRequest {
    uint32 port = 1;
    PortState state = 2;

    AccessControl access = 3;
}

message ListPortsRequest {
    AccessControl access = 1;
}

message ListPortsResponse {
    repeated Port ports = 1;
}

message WatchPortsRequest {
    repeated uint32 ports = 1;

    AccessControl access = 2;
}

enum PortState {
    OPEN = 0;
    CLOSE = 1;
}

message Port {
    uint32 port = 1;
    PortState state = 2;
}
