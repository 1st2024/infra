# Resources

## General
- https://www.figma.com/file/pr02o1okRpScOmNpAmgvCL/Architecture
- https://www.hashicorp.com/blog/continuous-deployment-with-nomad-and-terraform
- https://medium.com/interleap/automating-terraform-deployment-to-google-cloud-with-github-actions-17516c4fb2e5
- https://learn.hashicorp.com/tutorials/waypoint/get-started-nomad?in=waypoint/get-started-nomad#setting-up-nomad-with-persistent-volumes
- https://github.com/hashicorp/terraform-google-nomad
- https://github.com/picatz/terraform-google-nomad (preemptible rolling?, logs, dashboaard, security)
- https://github.com/picatz/terraform-google-nomad/issues/39
- https://github.com/picatz/terraform-google-nomad/issues/13
- https://stackoverflow.com/questions/64397938/how-to-integrate-terraform-state-into-github-action-workflow
- https://www.terraform.io/language/settings/backends/gcs
- https://todevornot.com/post/618457167027126272/gce-instance-with-persistent-disk-provisioned
- https://cloud.google.com/load-balancing/docs/l7-internal/int-https-lb-tf-examples
- https://arafatm.com/tech/hashi-consul-learn#install-consul
- https://medium.com/navin-nair/practical-hashicorp-nomad-and-consul-a-little-more-than-hello-world-part-1-991d2a54fd64
- https://github.com/nairnavin/practical-nomad-consul
- https://johansiebens.dev/posts/2020/12/monitoring-nomad-with-prometheus-and-thanos/
- https://github.com/firecracker-microvm/firecracker/issues/1179
- https://opensource.com/article/19/3/rust-virtual-machine
- https://hechao.li/tags/

## API
- https://github.com/deepmap/oapi-codegen
- https://support.smartbear.com/swaggerhub/docs/tutorials/openapi-3-tutorial.html
- https://editor.swagger.io/

## Orchestrator
- https://github.com/containernetworking/cni/blob/spec-v0.3.1/SPEC.md
- https://jvns.ca/blog/2021/01/20/day-42--writing-a-go-program-to-manage-firecracker-vms/
- https://github.com/weaveworks/ignite/blob/main/pkg/dmlegacy/snapshot.go#L61-L118 (LEGACY)
- https://github.com/cneira/firecracker-task-driver/issues/20
- https://github.com/firecracker-microvm/firecracker/issues/2027
- https://github.com/cneira/plugins
- https://github.com/codebench-dev/worker
- https://jvns.ca/blog/2021/01/27/day-47--using-device-mapper-to-manage-firecracker-images/
- https://github.com/firecracker-microvm/firecracker/blob/main/docs/mmds/mmds-user-guide.md
- https://www.koyeb.com/blog/the-koyeb-serverless-engine-from-kubernetes-to-nomad-firecracker-and-kuma
- https://stanislas.blog/2021/08/firecracker/
- https://webapp.io/blog/github-actions-10x-faster-with-firecracker/
- https://timperrett.com/2017/05/13/nomad-with-envoy-and-consul/
- https://firecracker-microvm.slack.com/archives/CG564DPTQ/p1650802849629629
- https://learn.hashicorp.com/collections/nomad/load-balancing
- https://discuss.hashicorp.com/t/creating-persistent-sessions-containers-with-nomad/38504/2
- https://learn.hashicorp.com/tutorials/nomad/prometheus-metrics
- https://github.com/firecracker-microvm/firecracker/blob/main/docs/prod-host-setup.md
- https://github.com/firecracker-microvm/firecracker/issues/329
- https://github.com/gitpod-io/openvscode-server
- https://www.packer.io/docs/datasources/hcp/hcp-packer-image
- https://kruzenshtern.org/run-a-firecracker-on-nomad/
- https://kruzenshtern.org/firecracker-network-setup/
- https://www.youtube.com/watch?v=CYCsa5e2vqg
- https://github.com/firecracker-microvm/firecracker-go-sdk
- https://github.com/hashicorp/nomad/blob/main/website/content/api-docs/volumes.mdx
- https://www.nomadproject.io/tools/autoscaling/plugins/target/gce-mig
- https://github.com/hashicorp/consul/issues/6672
- https://github.com/hashicorp/nomad/issues/2508
- https://github.com/hashicorp/nomad/issues/7173
- https://discuss.hashicorp.com/t/consul-server-unable-to-join-consul-cluster/19068/3
- Packer multiple builders
- https://github.com/superfly/init-snapshot
- https://blog.oddbit.com/post/2018-01-25-fun-with-devicemapper-snapshot/
- https://github.com/firecracker-microvm/firecracker-containerd/blob/main/docs/snapshotter.md
- https://gruchalski.com/posts/2021-02-19-the-jailer/
- https://gruchalski.com/posts/2021-04-14-launching-consul-cluster-with-firebuild/

## Filesystem
- losetup
- dmsetup
- tmpfs
- https://github.com/weaveworks/ignite/tree/main/pkg/dm
- https://www.kernel.org/doc/Documentation/device-mapper/snapshot.txt
- https://wiki.gentoo.org/wiki/Device-mapper
- https://github.com/firecracker-microvm/firecracker-containerd/issues/75
- https://github.com/firecracker-microvm/firecracker-containerd/pull/153
- https://jvns.ca/blog/2019/11/18/how-containers-work--overlayfs/
- https://gruchalski.com/posts/2021-02-16-live-resize-firecracker-vmm-drive/
- https://github.com/firecracker-microvm/firecracker/pull/2743
- https://github.com/firecracker-microvm/firecracker/blob/34955a935c59c19361e0652b43e5bb77bca92da7/docs/overlay-filesystem.md
- https://github.com/firecracker-microvm/firecracker-containerd/blob/main/tools/image-builder/files_debootstrap/sbin/overlay-init#L39

## Networking
- https://gruchalski.com/posts/2021-02-17-bridging-the-firecracker-network-gap/
- https://gruchalski.com/posts/2021-02-07-vault-on-firecracker-with-cni-plugins-and-nomad/
- https://gruchalski.com/posts/2021-02-18-its-all-about-the-iface-name/
- https://www.cni.dev/docs/
- virtual network device
- virtual networking
- bridge
- vlan
- subnetworks
- veth, veth pairs
- tap
- tun
- dns
- cgroups
- network namespaces
- network layers 1-7
- IP4, IP6
- http overview
- https://hechao.li/2017/11/23/vxlan/
- https://hechao.li/2020/06/09/Mini-Container-Series-Part-0-Not-a-Real-Container/
- https://hechao.li/2017/12/13/linux-bridge-part1/
- https://hechao.li/2018/01/31/linux-bridge-part2/
- https://hechao.li/2018/08/08/The-Spanning-Tree-Protocol/
- https://hechao.li/2018/05/21/Tun-Tap-Interface/
- https://hechao.li/2018/06/08/TAP-Interface-Lab/
- https://hechao.li/2018/06/25/Rate-Limiter-Part1/
- https://hechao.li/2018/06/27/Rate-Limiter-Part2/
- https://www.oreilly.com/library/view/network-warrior-2nd/9781449307974/ch04.html
- https://networkdirection.net/articles/network-theory/taggeduntaggedandnativevlans/
- https://fly.io/blog/bpf-xdp-packet-filters-and-udp/ 
- https://www.practicalnetworking.net/series/packet-traveling/osi-model/#:~:text=The%20Physical%20layer%20of%20the,Ethernet%20cable%20or%20Serial%20Cable.
- https://traefik.io/
- https://learn.hashicorp.com/tutorials/nomad/load-balancing-traefik
- https://traefik.io/resources/plugin-to-traefik-create-and-publish-your-own-middleware-3/

## Envs
- https://github.com/combust-labs/firebuild#high-level-example
- https://cloud.google.com/compute/docs/disks/performance
- https://cloud.google.com/filestore/docs/mounting-fileshares (pretty expensive)
- https://cloud.google.com/sdk/gcloud/reference/compute/instances/attach-disk (more work)
- https://cloud.google.com/compute/docs/disks/regional-persistent-disk#use_multi_instances
- https://gist.github.com/caleblloyd/4651e713689bfe43c74d
- Using packer for creating rootfs images instead of docker?
- https://cloud.google.com/compute/docs/disks/local-ssd#choose_an_interface
- https://cloud.google.com/compute/docs/disks/mount-ram-disks
- https://www.google.com/search?q=btrfs+zfs+ext4&sxsrf=APq-WBubG7Uq1tq97zwnRekapuQAytx05g%3A1651126058214&ei=Ki9qYs_kDL7-7_UPk5Sm2As&oq=btrfs+and+zfs+and+ex&gs_lcp=Cgdnd3Mtd2l6EAMYADIGCAAQFhAeOgcIABBHELADOgUIIRCgAToICCEQFhAdEB5KBAhBGABKBAhGGABQwARY4wtguhNoAXABeACAAXiIAdUEkgEDNi4xmAEAoAEByAEIwAEB&sclient=gws-wiz
- https://jvns.ca/blog/2021/01/23/firecracker--start-a-vm-in-less-than-a-second/
- NIX
- https://gruchalski.com/posts/2021-03-23-introducing-firebuild/
- https://gruchalski.com/posts/2021-02-14-firecracker-vmm-with-additional-disks/
- https://gruchalski.com/posts/2021-03-03-thoughts-on-creating-vmms-from-docker-images/
- https://gruchalski.com/posts/2021-03-28-firebuild-rootfs-grpc-with-mtls/
- The rootfs path on the machine where we made the snapshot must be the same as the path when we are restoring the snapshot
- https://gruchalski.com/posts/2021-03-22-firebuild-prerequisites/
- Files and scripts
  - `_resorces/create.sh`
  - `_resorces/load.sh`
  - `_resorces/provision.sh`
  - `_resorces/resume.sh`
  - `_resorces/snapshot.sh`
  - `_resorces/start-fc.sh`
  - `_resorces/stop.sh`
  - `_resorces/Dockerfile`
